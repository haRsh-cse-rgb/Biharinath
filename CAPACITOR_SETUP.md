# Capacitor Setup Guide for Biharinath Organic Farms

This guide will help you set up Capacitor to convert your Next.js app into a mobile app for iOS and Android.

## Prerequisites

- Node.js installed
- For iOS: macOS with Xcode installed
- For Android: Android Studio installed

## Installation Steps

### 1. Install Capacitor Dependencies

```bash
npm install
```

This will install all Capacitor packages including:
- @capacitor/core
- @capacitor/cli
- @capacitor/ios
- @capacitor/android
- @capacitor/splash-screen
- @capacitor/status-bar

### 2. Build Your Next.js App

```bash
npm run build
```

This creates the `out` directory with your static export.

### 3. Initialize Capacitor (First Time Only)

The `capacitor.config.json` file is already created. If you need to initialize manually:

```bash
npx cap init
```

When prompted:
- App name: `Biharinath Organic Farms`
- App ID: `com.biharinath.organicfarms`
- Web dir: `public`

**Important**: The config file is already set up. Since your app uses API routes, you have two options:

**Option A: Point to Deployed Server (Recommended for Production)**
- Deploy your Next.js app (e.g., on Vercel)
- Update `capacitor.config.json` server.url to point to your deployed URL
- Example: `"url": "https://your-app.vercel.app"`
- This way the mobile app calls your live API

**Option B: Use Local Server (For Development)**
- The config is already set to `http://localhost:3000` for development
- Run `npm run dev` in one terminal
- Then run `npm run cap:open:ios` or `npm run cap:open:android` in another terminal

### 4. Add iOS Platform

```bash
npm run cap:add:ios
```

Or manually:
```bash
npx cap add ios
```

### 5. Add Android Platform

```bash
npm run cap:add:android
```

Or manually:
```bash
npx cap add android
```

### 6. Sync Your App

**For Development:**
```bash
npm run dev  # Start Next.js dev server
npm run cap:sync
npm run cap:open:ios  # or cap:open:android
```

**For Production:**
1. Deploy your Next.js app (e.g., on Vercel)
2. Update `capacitor.config.ts` with your deployed URL
3. Build and sync:
```bash
npm run build
npm run cap:sync
npm run cap:open:ios  # or cap:open:android
```

**Note**: Since your app uses API routes, you need a server. The mobile app will call your deployed Next.js API endpoints.

### 7. Open in Native IDEs

**iOS:**
```bash
npm run cap:open:ios
```

**Android:**
```bash
npm run cap:open:android
```

## Platform Detection

The app automatically detects the platform and applies different styles:

- **Web**: Standard browser experience
- **PWA**: Progressive Web App (when installed as PWA)
- **iOS**: Native iOS app
- **Android**: Native Android app

## Platform-Specific Styling

The app uses CSS classes to apply platform-specific styles:

- `.platform-web` - Web browser
- `.platform-pwa` - PWA installed
- `.platform-ios` - iOS native app
- `.platform-android` - Android native app
- `.is-native` - Any native app (iOS or Android)
- `.is-pwa` - PWA mode

You can customize styles in `app/globals.css` for each platform.

## Building for Production

### iOS

1. Open Xcode: `npm run cap:open:ios`
2. Select your target device/simulator
3. Click "Run" or use Product > Archive for App Store

### Android

1. Open Android Studio: `npm run cap:open:android`
2. Build > Generate Signed Bundle / APK
3. Follow the wizard to create your release build

## PWA Features

The app includes a `manifest.json` for PWA installation:
- Installable on mobile devices
- Standalone mode
- App shortcuts
- Custom theme colors

## Notes

- Always run `npm run build` before `cap sync` to ensure latest changes are included
- The `out` directory is generated by Next.js static export
- Platform detection happens client-side using the `usePlatform` hook
- Safe area insets are automatically handled for native apps

